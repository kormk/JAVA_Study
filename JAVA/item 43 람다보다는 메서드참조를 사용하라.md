# Item 43. 람다보다는 메서드 참조를 사용하라

람다가 익명 클래스보다 나은 점 중에서 가장 큰 특징은 간결함이다.

메서드 참조를 사용하면 함수 객체를 람다보다 더 간결하게 만들 수 있다.

## 본문

> 아래 코드는 임의의 키와 Integer값의 매핑을 관리하는 프로그램의 일부이다.
> 

```java
map.merge(key, 1, (count, incr) -> count + incr);
```

- 이 코드는 키가 맵 안에 없다면 키와 숫자 1을 매핑하고, 이미 있다면 기존의 매핑값을 증가시킨다.
- merge 메소드가 키, 값, 함수를 인수로 받는다.
    - 주어진 키가 맵 안에 없다면 주어진 {키, 값}쌍을 그대로 저장한다.
    - 반대로 주어진 키가 이미 있다면 함수를 현재 값과 주어진 값에 적용한 다음, 그 결과로 현재값을 덮어쓴다. 즉 맵에 {키, 함수의 결과} 쌍을 저장한다.
    

✅ JAVA 8이 되면서 Integer 클래스(와 모든 기본타입의 박싱 타입)는 이 람다와 기능이 같은 정적 메서드 sum을 제공하기 시작했다.

> 람다 대신 메서드 참조를 전달하는 코드
> 

```java
map.merge(key, 1, Integer::sum);
```

매개변수의 개수가 늘어날수록 메서드 참조로 제거할 수 있는 코드의 양도 늘어난다. 하지만 람다에서는 매개변수의 이름 자체가 프로그래머에게 좋은 가이드가 되기도 한다. 이런 람다는 길이는 더 길지만 메서드 참조보다 읽기 쉽고 유지보수도 쉬울 수 있다.

람다로 할 수 없는 일이라면 메서드 참조로도 할 수 없다. 

그렇더라도 메서드 참조를 사용하는 편이 보통은 더 짧고 간결하므로 람다로 구현했을 때 너무 길거나 복잡하다면 메서드 참조가 좋은 대안이 되어준다. 

즉 람다로 작성할 코드를 새로운 메서드에 담은 다음 람다대신 그 메서드를 사용하는 식이다.

메서드 참조에는 기능을 잘 드러내는 이름을 지어줄 수 있고 친절한 설명을 문서로 남길 수도 있다.

## 람다가 메서드 참조보다 간결한 경우

주로 메서드와 람다가 같은 클래스에 있는 경우에 람다가 메서드 참조보다 간결하다.

예를 들어 다음 코드가 KeimyungUnivAuthenticate 클래스 안에 있다고 가정해보자.

```java
service.execute(KeimyungUnivAuthenticate::action);
```

이를 람다로 대체하면 아래와 같이 된다.

```java
service.execute(()-> action());
```

## 다섯 가지의 메서드 참조 유형

| 메서드 참조 유형 | 예 | 같은 기능을 하는 람다 |
| --- | --- | --- |
| 정적 | Integer::parseInt | str→Integer.parseInt(str) |
| 한정적(인스턴스) | Instant.now()::isAfter | Instant then = Instant.now(); <br/>t → then.isAfter(t) 
| 비한정적(인스턴스) | String::toLowerCase | str →str.toLowerCase() |
| 클래스 생성자 | TreeMap<K,V>::new | ()→ new TreeMap<K,V>() |
| 배열 생성자 | int[]::new | len → new int[len] |

> 정적
> 

수신 객체(참조 대상 인스턴스)를 특정한다.

> 한정적(인스턴스)
> 

수신 객체를 특정하지 않는다.

근본적으로 정적 참조와 비슷하다.

즉, 함수 객체가 받는 인수와 참조되는 메서드가 받는 인수가 똑같다.

> 비한정적(인스턴스)
> 

함수 객체를 적용하는 시점에 수신 객체를 알려준다. 이를 위해 수신객체를 적용하는 시점에 수신 객체 전달용 매개변수가 매개변수 목록의 첫 번째로 추가되며, 그 뒤로는 메서드 선언에 정의된 매개변수들이 뒤따른다.

주로 스트림 파이프라인에서의 매핑과 필터 함수에 쓰인다.

> 클래스 생성자
> 

생성자 참조는 팩터리 객체로 사용된다.

> 배열 생성자
> 

생성자 참조는 팩터리 객체로 사용된다.

### 📌 메서드 참조는 람다의 간단명료한 대안이 될 수있다. 메서드 참조 쪽이 짧고 명확하다면 메서드 참조를 쓰고, 그렇지 않을 때만 람다를 사용하자